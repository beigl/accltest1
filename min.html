<!-- example script for the Mobile Computing and Internet of Things lecture -->
<!-- showcases a minimal script to access sensors on the Smartphone         -->
<!-- tested for Android                                                     -->
<!-- things to learn: 1) Access to sensors may require permission           -->
<!--                  2) API came in a pre-processed format (.acceleration ) or a non-preprocessed format (..accelerationIncludingGravity). -->
<!--                     the latter returns also the earth gravity value                                      -->
<!--                  3) access to sensors should be done via event listening                                 -->
<!--                  4) button on the screen should be large enought to be clickable, and also placed in a good-to-reach position -->
<!doctype html> <!-- minimal HTML5 doctype -->
<meta name=viewport content="width=device-width,initial-scale=1"> <!-- proper scaling on phone -->
<body style="margin:0;display:grid;place-items:center;height:100vh;gap:16px;background:#fff;font:700 28px system-ui"> <!-- center everything, large font -->
<div id=out>Tap Start2</div> <!-- where x,y,z will be shown -->
<button id=btn style="font:600 22px system-ui;padding:16px 24px;border-radius:12px">Start</button> <!-- large clickable button -->
<script>
// when Start is tapped
btn.onclick = async () => {
  // ask for permission on iOS (Android Chrome ignores if not needed)
  if (window.DeviceMotionEvent?.requestPermission) { try { await DeviceMotionEvent.requestPermission(); } catch(e){} }
  const outEl = out;                           // keep a stable reference to the output element
  // listen for accelerometer events
  window.addEventListener('devicemotion', e => {        // the OS decides on the appropriate sampling rate. Between 50-100Hz in Android, reduced to 30Hz in power save mode
    const acc = e.accelerationIncludingGravity   || {}; // avoid the gravity-free API to show the "rawer" signal
    const nums = [acc.x, acc.y, acc.z].map(v => (v ?? 0).toFixed(2));   // format numbers to 2 decimals
    outEl.textContent = `x:${nums[0]}  y:${nums[1]}  z:${nums[2]}`;     // print in the middle of the screen
  }, {passive:true});                         // passive for smoothness
  btn.remove();                               // hide button once running
};
</script>
